\subsubsection{Bus Reader}

The \textbf{Bus Reader} task is responsible for processing all incoming messages and updating the
local node state accordingly. For each received message, the node applies message-specific rules
based on the message type and its current internal state.

\paragraph{LeaderHeartbeat}
Upon receiving a \textbf{LeaderHeartbeat} message, the node evaluates the information carried by
the message to update its view of the leader and the best candidate:
\begin{itemize}
  \item If the heartbeat round is greater than the local round, the node updates its round and
    adopts the heartbeat sender as the current best candidate, updating the associated potential.
  \item If the heartbeat sender is already known as the best candidate, or if its potential is
    greater than or equal to the locally known best candidate potential, the node updates its
    best candidate information accordingly.
  \item If the heartbeat sender has a potential greater than or equal to both the local node
    potential and the current best candidate potential, the node adopts the heartbeat sender as
    the current leader and aborts any ongoing election by resetting election-related state
    (sent election flag, vote flag, and supporter count).
  \item If the heartbeat sender matches the current leader, the node refreshes the leader
    heartbeat counter and updates the stored leader potential.
\end{itemize}
Upon reception of a valid \textbf{LeaderHeartbeat}, the node reduces its election time scale
factor, progressively restoring the base election frequency. This mechanism accelerates
convergence toward a stable leader once leadership has been established.

\paragraph{NewElection}
Upon receiving a \textbf{NewElection} message, the node evaluates whether the proposing candidate
should be supported or suppressed. The node responds only if all the following conditions hold:
\begin{enumerate}
  \item the candidate potential is greater than the local node potential;
  \item the candidate potential is greater than or equal to the locally known best candidate
    potential.
\end{enumerate}
Notably, this rule also applies to the current leader, allowing a leader to voluntarily endorse a
stronger candidate without requiring leader failure or timeout.


If these conditions are satisfied:
\begin{itemize}
  \item the node abandons any ongoing election attempt by resetting its election state;
  \item the candidate is adopted as the new best candidate and its potential is stored;
  \item a \textbf{VoteResponse} message endorsing the candidate is broadcast.
\end{itemize}

During a single election round, a node may emit multiple vote responses, but only when endorsing
candidates with strictly increasing potential\footnote
{
  This allows nodes to revise their support as better candidates are discovered.
}.

\paragraph{VoteResponse}
Upon receiving a \textbf{VoteResponse} message, a node increments its local supporter
count only if:
\begin{enumerate}
  \item it has previously initiated an election;
  \item the response round matches the local election round;
  \item the endorsed candidate identifier matches the local node identifier.
\end{enumerate}

If the number of collected endorsements exceeds half of the total number of nodes in the network,
the node declares itself leader and updates its internal state accordingly by advancing the round,
resetting election-related flags, and clearing the supporter count.

If neither leader nor best-candidate heartbeats are observed for a sufficient period, the node
resets its election time scale factor, restoring full election aggressiveness and ensuring
self-stabilization.
